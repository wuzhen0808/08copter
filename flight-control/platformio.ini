; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html


[env:uno_r4_minima]
platform = renesas-ra
board = uno_r4_minima
framework = arduino
lib_deps =	
	FreeRTOS-Kernel
	FreeRTOS-MemMang-heap4
	FreeRTOS-ArduinoRenesas-UNO
	arduino-libraries/Servo@^1.2.1
	hideakitai/MPU9250@^0.4.8	
	simulator
	arduino
build_src_filter = +<arduino/>
build_unflags = -fno-exceptions	
build_flags = -fexceptions
	-D A8_ENV=1
	-I lib/util/include
	-I lib/hal/include
	-I lib/core/include
	-I lib/freertos/include
	-I lib/simulator/include
	-I lib/FreeRTOS-ArduinoRenesas-UNO/include
	-I lib/arduino/include

;
;start of Native env
[env:native]
platform = native
test_framework = googletest
lib_deps =	
	FreeRTOS-Kernel
	FreeRTOS-MemMang-heap4
	;how below lib configuration this funcational?
	FreeRTOS-MSVC-MingW
	native	
build_src_filter = +<native/>
build_flags = 	
	-D A8_ENV=2
	-I lib/util/include
	-I lib/hal/include
	-I lib/core/include
	-I lib/freertos/include
	-I lib/native/include  	
	;why we need folowing include path? lib_deps already configured to include the lib name.
	-I lib/FreeRTOS-MSVC-MingW/include
	-std=gnu++11
	-lwinmm	

[env:debug]
platform = native
test_framework = googletest
lib_deps =	
	FreeRTOS-Kernel
	FreeRTOS-MemMang-heap4
	;how below lib configuration this funcational?
	FreeRTOS-MSVC-MingW
	JSBSim-Kernel
	jsbsim
	native	
;extends = native does not work for extends feature?
build_src_filter = +<native/>
build_flags = 	
	-D A8_ENV=2
	;start of JSBSIM
	;Why we add source code of JSBSim here?
	;Why not use the lib provided by JSBIim officially?
	;Because we cannot build with that lib(JSBSim.lib) and include to build our code.
	;With errors like undefined reference __imp__XXXX;
	;We suspect JSBSim.lib is not a valid format for us to build it with a gcc tool from MingGW env.
	;But, the same error if we replace JSBSim.lib with libJSBSim.a which is build in the MingGW ucrt env by ourself.
	;So we trying to build the source code of JSBSim, and there points to keep in mind:
	;1, Add options here. 
	
	;2, You need remove some source files which is not used and outdated for compile.
	;3, You need remove the utilities folder as well, which is a place for other standalong tools to be defined.
	-D JSBSIM_VERSION=\"1.1.13\"
	;_WIN32=1 and JSBSIM_STATIC_LINK=0 is used to define JSBSIM_API macro in JSBSim_API.h.
	-D _WIN32=1	
	-D JSBSIM_STATIC_LINK=0
	;libs used by JSBSim, which likely the standard lib of C?
	-lws2_32
	;end of JSBSIM
	-I lib/util/include
	-I lib/hal/include
	-I lib/core/include
	-I lib/freertos/include
	-I lib/native/include  	
	-I lib/FreeRTOS-MSVC-MingW/include
	-I lib/jsbsim/include
	-std=gnu++11
	-lwinmm
	-g
		
	;-D A8_DEBUG_STRING


[env:plot]
platform = native
lib_deps =		
	;exsyxml
	JSBSim-Kernel
	JSBSim-Plot	
build_src_filter = +<plot/>
build_flags = 	
	-D JSBSIM_VERSION=\"1.1.13\"
	;to-fix: ... redeclared without dllimport attribute: previous dllimport ignored [-Wattributes]
	-D _WIN32=1	
	-D JSBSIM_STATIC_LINK=0
	;end of to-fix	
	-lws2_32
	-I lib/JSBSim-Kernel/include
	-std=gnu++11
	;to-fix:winconfig.h: No such file or directory
	-lwinmm
	-g

[env:jsbsim]
platform = native
lib_deps =		
	;exsyxml
	JSBSim-Kernel	
build_src_filter = +<jsbsim/>
build_flags = 	
	-D JSBSIM_VERSION=\"1.2.0\"
	;to-fix: ... redeclared without dllimport attribute: previous dllimport ignored [-Wattributes]
	-D _WIN32=1	
	-D JSBSIM_STATIC_LINK=0
	;end of to-fix	
	-lws2_32
	;-I lib/JSBSim-Kernel/include
	-std=gnu++11
	;to-fix:winconfig.h: No such file or directory
	-lwinmm
	-g
		



	
